var player,OKEvents,options,fakeMouseOut;
(function(b){b.okvideo=function(c){"object"!==typeof c&&(c={source:c});var a=this;a.init=function(){a.options=b.extend({},b.okvideo.options,c);b("body").append('<div style="position:fixed;left:0;top:0;overflow:hidden;z-index:-998;height:100%;width:100%;" id="okplayer-mask"></div><div id="okplayer" style="position:fixed;left:0;top:0;overflow:hidden;z-index:-999;height:100%;width:100%;"></div>');a.setOptions();"youtube"===a.options.source.provider?a.loadYoutubeAPI():"vimeo"===a.options.source.provider&&
a.loadVimeoAPI()};a.setOptions=function(){for(var e in this.options)!0===this.options[e]&&(this.options[e]=1);a.options.source=a.determineProvider();b(window).data("okoptions",a.options)};a.loadYoutubeAPI=function(){a.insertJS("http://www.youtube.com/player_api")};a.loadVimeoAPI=function(){b("#okplayer").replaceWith(function(){return'<iframe src="http://player.vimeo.com/video/'+a.options.source.id+"?api=1&js_api=1&title=0&byline=0&portrait=0&playbar=0&loop="+a.options.loop+'&player_id=okplayer" frameborder="0" style="'+
b(this).attr("style")+'visibility:hidden;background-color:black;" id="'+b(this).attr("id")+'"></iframe>'});a.insertJS("http://a.vimeocdn.com/js/froogaloop2.min.js",function(){vimeoPlayerReady()})};a.insertJS=function(a,b){var d=document.createElement("script");b&&(d.readyState?d.onreadystatechange=function(){if("loaded"==d.readyState||"complete"==d.readyState)d.onreadystatechange=null,b()}:d.onload=function(){b()});d.src=a;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(d,
c)};a.determineProvider=function(){if(/youtube.com/.test(a.options.source)||/vimeo.com/.test(a.options.source))return a.parseVideoURL(a.options.source);if(/[A-Za-z0-9_]+/.test(a.options.source)){var b=new String(a.options.source.match(/[A-Za-z0-9_]+/));if(11==b.length)return{provider:"youtube",id:b};for(b=0;b<a.options.source.length;b++)if("number"!=typeof parseInt(a.options.source[b]))throw"not vimeo but thought it was for a sec";return{provider:"vimeo",id:a.options.source}}};a.parseVideoURL=function(a){var b=
{};if(-1!=a.indexOf("youtube.com/watch"))b.provider="youtube",a=(a=a.match(/(\?|&)v\=([^&]*)(&|$)/))?a[2]:"",b.id=a;else if(a=a.match(/vimeo.com\/(\d+)/))b.provider="vimeo",b.id=a[1];else throw"OKVideo: You have not entered a valid url. Please enter a URL from Vimeo or Youtube.";return b};a.init()};b.okvideo.options={source:null,disableKeyControl:1,captions:0,loop:1,hd:1,volume:0};b.fn.okvideo=function(c){return this.each(function(){new b.okvideo(c)})}})(jQuery);
function vimeoPlayerReady(){options=$(window).data("okoptions");var b=$("#okplayer")[0];player=$f(b);window.setTimeout($("#okplayer").css("visibility","visible"),2E3);player.addEvent("ready",function(){player.api("play");if("ontouchstart"in window.touchStart)OKEvents.v.onPlay();else player.addEvent("play",OKEvents.v.onPlay())})}
function onYouTubePlayerAPIReady(){options=$(window).data("okoptions");player=new YT.Player("okplayer",{videoId:options.source.id,playerVars:{autohide:1,autoplay:1,disablekb:options.keyControls,cc_load_policy:options.captions,controls:0,enablejsapi:1,fs:0,iv_load_policy:1,loop:options.loop,showinfo:0,rel:0,wmode:"opaque",hd:options.hd},events:{onReady:OKEvents.yt.ready,onError:OKEvents.yt.error}})}
OKEvents={yt:{ready:function(b){b.target.setVolume(options.volume)},error:function(b){throw b;}},v:{onPlay:function(){player.api("api_setVolume",options.volume)}}};
